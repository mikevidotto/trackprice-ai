package main

import (
	"github.com/mikevidotto/trackprice-ai/internal/ai"
	"fmt"
	"log"

	"github.com/joho/godotenv"
)

func test_ai() {
	// Load environment variables
	err := godotenv.Load()
	if err != nil {
		log.Fatal("Error loading .env file")
	}

	// Simulated raw text from a competitor's website
	rawText := `
		<iframe src="//www.googletagmanager.com/ns.html?id=GTM-NQ3XB9" height="0" width="0" style="display:none;visibility:hidden"></iframe>Free$0USD/ monthCreate accountPro$12USD/ member / month, billed annuallyGet startedEnterpriseContact SalesGrammarly HomeProductLearnFeaturesProduct DemoAI at GrammarlyTrust & Security Grammarly has acquired Coda— learn about the product DownloadDesktopMobileBrowserWorkBy Team SizeEnterpriseTeams & BusinessesIndividualsBy Team FunctionCustomer SupportMarketingITSalesHREducationStudentsInstitutionsPricingResourcesLearnBlogCustomer StoriesBusiness Events & ResourcesEducation Events & ResourcesHelp CenterToolsAI Writing ToolsGrammar CheckerPlagiarism CheckerAI DetectorParaphrasing ToolCitation GeneratorContact SalesLog inContact SalesLog inGrammarly HomeProductLearnFeaturesProduct DemoAI at GrammarlyTrust & Security Grammarly has acquired Coda— learn about the product DownloadDesktopMobileBrowserWorkBy Team SizeEnterpriseTeams & BusinessesIndividualsBy Team FunctionCustomer SupportMarketingITSalesHREducationStudentsInstitutionsPricingResourcesLearnBlogCustomer StoriesBusiness Events & ResourcesEducation Events & ResourcesHelp CenterToolsAI Writing ToolsGrammar CheckerPlagiarism CheckerAI DetectorParaphrasing ToolCitation GeneratorContact SalesLog inGreat Writing Starts With a PlanTrusted by over 40 million people and 50,000 organizationsMost popularFor individualsFreeWrite without spelling and grammar mistakes.$0USD/ monthCreate accountWrite without mistakesSee your writing toneGenerate text with 100 AI promptsMost popularFor individuals and teamsProAchieve your goals with clear and confident writing.$12USD/ member / month, billed annually$30 when billed monthlyGet startedEverything in Free, plus:Rewrite full sentences with a clickAdjust your writing tone with easeWrite fluently in EnglishUnlimited personalized suggestionsDetect plagiarism and AI generated textGenerate text with 2,000 AI promptsMost popularFor larger organizationsEnterpriseDrive results across your entire organization with trusted AI.Contact SalesEverything in Pro, plus:Dedicated supportBYOK encryptionCustom roles and permissionsData loss preventionCost center visibilityGenerate text with unlimited AI promptsCompare PlansWriting featuresFreeProEnterpriseWrite without mistakesCheckmarkCheckmarkCheckmarkSee your writing toneCheckmarkCheckmarkCheckmarkAdjust your writing toneUnavailableCheckmarkCheckmarkRewrite full sentencesUnavailableCheckmarkCheckmarkWrite fluently in EnglishUnavailableCheckmarkCheckmarkUse inclusive languageUnavailableCheckmarkCheckmarkKeep your citations consistentUnavailableCheckmarkCheckmarkCatch accidental plagiarismUnavailableCheckmarkCheckmarkGenerate text with AI prompts100 prompts / month2,000 prompts / member / monthUnlimited prompts / member / monthComplete workflows from GrammarlyLimited app actionsAll app actionsAll app actionsSecurity featuresEnterprise-grade privacy and securityUnavailableCheckmarkCheckmarkAccount roles and permissionsUnavailableCheckmarkCheckmarkSAML single sign-onUnavailableCheckmarkCheckmarkSCIMUnavailableUnavailableCheckmarkManaged modeUnavailableUnavailableCheckmarkInvite and domain captureUnavailableUnavailableCheckmarkUser groupsUnavailable2UnlimitedCustom rolesUnavailableUnavailableCheckmarkApplication and domain controlsUnavailableUnavailableCheckmarkClient controlUnavailableUnavailableCheckmarkConfidential modeUnavailableUnavailableCheckmarkData loss preventionUnavailableUnavailableCheckmarkAudit Logs APIUnavailableUnavailableCheckmarkEnterprise key management (BYOK)UnavailableUnavailableCheckmarkSession timeoutUnavailableUnavailableCheckmarkGroup-level security controlsUnavailableUnavailableCheckmarkCost center visibilityUnavailableUnavailableCheckmarkTeam featuresStyle guideUnavailable1UnlimitedBrand tonesUnavailable1UnlimitedKnowledge ShareUnavailableCheckmarkCheckmarkSnippetsUnavailableCheckmarkCheckmarkAnalytics dashboardUnavailableTeam AnalyticsTeam and Individual AnalyticsCustomer supportHelp centerCheckmarkCheckmarkCheckmarkPriority supportUnavailableCheckmarkCheckmarkDedicated supportUnavailableUnavailableCheckmarkTrusted by over 40 million people and 50,000 organizations“I used to spend 20–30 hours a week reviewing, rewriting, and coaching. Grammarly has cut that by at least half, and that’s allowed my team to scale without scaling.”Neil HamiltonHead of Editorial“Grammarly reduces the time our team spends reviewing written work. Grammarly brings value to our organization with both productivity and consistency.”Debbie CottonInternal Communications Lead“Grammarly helped us consolidate our existing guides into one place, which included suggestions on how to spell and use our branded terms and partner names.”Janine AndersonContent Operations ManagerFrequently Asked QuestionsWhat will happen to my Premium subscription if I switch to Pro? If you are currently a Premium subscriber, switching to Pro will cancel your Premium subscription, and you will receive a refund prorated to the remainder of your subscription.The Pro plan includes all of the advanced writing features included in Premium, such as tone suggestions and full-sentence rewrites, plus team features that were previously available only in the Business plan.How secure is Grammarly?Grammarly keeps security at the heart of our product, infrastructure, and company operations. Learn more about our security practices. Grammarly’s SOC 2 (Type 2) report attests to our enterprise-grade system and organization controls regarding security, privacy, availability, and confidentiality.What forms of payment do you accept?We accept major credit cards (Visa, American Express, Mastercard, Discover) or PayPal. If you are purchasing Grammarly Business for 10 or more members on an annual plan, you can request an invoice. Invoices can be paid by bank transfer (ACH/Wire), major credit cards, Apple Pay, and Google Pay. Note: PayPal cannot be used to pay invoices.Do you offer discounts for educational institutions?Yes! Learn more about our discounts for educational institutions.Ready to Achieve Your Goals?Get Grammarly ProLooking for Enterprise? Contact SalesGet GrammarlyGrammarly for Your DesktopGrammarly for WindowsGrammarly for MacGrammarly Browser ExtensionGrammarly for ChromeGrammarly for SafariGrammarly for FirefoxGrammarly for EdgeGrammarly for MS OfficeGrammarly for Google DocsGrammarly for MobileGrammarly for iPhoneGrammarly for iPadGrammarly for AndroidLearn MorePlansGrammarly ProGrammarly for Teams & BusinessesGrammarly EnterpriseGrammarly for EducationAI at GrammarlyGenerative AIAI Writing AssistantBlogTech BlogEducation BlogBusiness BlogCodaFeaturesGrammar CheckerPlagiarism CheckerAI DetectorCitation GeneratorEssay CheckerParaphrasing ToolAI Writing ToolsTone DetectorWord CounterStyle GuideSnippetsAnalyticsBrand TonesAuthorshipCompanyAboutWe Stand With UkraineResponsible AICareers & CulturePressAffiliatesPartnersTrust CenterPrivacy PolicyTerms of ServiceCustomer Business AgreementCA Notice at CollectionSecurityAccessibilityConnectHelp CenterContact Us Facebook Instagram X LinkedInGrammarly Home© 2025 Grammarly, Inc.[0,1,2,3,175] <img style="visibility: hidden;overflow:hidden;position:absolute;width:0;height:0" src="/api/tracking/noScript?isInitial=true&pageId=singlePlanComparison&userId=-349875661817526528&requestId=3hnm5hzDVQ9aeLYdGDwq&containerId=otrx9mo21u530e82">
	`

	// Extract pricing info using OpenAI
	extractedPricing, err := ai.ExtractPricingInfo(rawText)
	if err != nil {
		log.Fatal("❌ Failed to extract pricing info:", err)
	}

	fmt.Println("✅ Extracted Pricing Info:", extractedPricing)
}
